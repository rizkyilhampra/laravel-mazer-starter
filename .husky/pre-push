if command -v docker &>/dev/null && docker info --format '{{.ServerVersion}}' &>/dev/null; then
    ./vendor/bin/sail bin phpstan analyse --memory-limit=1G --error-format=blade --ansi
    ./vendor/bin/sail pest --filter=arch --colors=always
    ./vendor/bin/sail pest --type-coverage --min=100 --colors=always
    ./vendor/bin/sail pest --parallel --coverage --exclude-testsuite=Arch --colors=always
else
    ./vendor/bin/phpstan analyse --memory-limit=1G --error-format=blade --ansi
    ./vendor/bin/pest --filter=arch
    ./vendor/bin/pest --type-coverage --min=100
    ./vendor/bin/pest --parallel --coverage --exclude-testsuite=Arch
fi
